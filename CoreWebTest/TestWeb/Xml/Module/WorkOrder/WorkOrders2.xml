<?xml version="1.0" encoding="UTF-8"?>
<tk:Toolkit version="5.0" xsi:schemaLocation="http://www.qdocuments.net ..\..\schema\v5\Module.xsd" xmlns:tk="http://www.qdocuments.net" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <tk:Module>
    <tk:Title>
      <tk:Content>工单池</tk:Content>
    </tk:Title>
    <tk:MetaData>
      <tk:MasterDetailMetaData>
        <tk:Master>
          <tk:SingleXmlMetaData DataXml="WorkOrder/WorkOrders.xml">
            <tk:TableDesc>
              <tk:Content>工单池</tk:Content>
            </tk:TableDesc>
          </tk:SingleXmlMetaData>
        </tk:Master>
        <tk:Detail ListStyle="Table">
          <tk:SingleXmlMetaData DataXml="WorkOrder/WorkOrdersAttachment.xml" DisableAutoDetailLink="true"/>
        </tk:Detail>
      </tk:MasterDetailMetaData>
    </tk:MetaData>
    <tk:Source>
      <tk:MasterDetailDbSource UseMetaData="true">
        <tk:MasterResolver>
          <tk:MetaDataResolver AutoTrackField="true" AutoUpdateKey="true">
            <tk:Scheme>
              <tk:Tk5DataXml FileName="WorkOrder/WorkOrders.xml"/>
            </tk:Scheme>
          </tk:MetaDataResolver>
        </tk:MasterResolver>
        <tk:Detail>
          <tk:Resolver>
            <tk:MetaDataResolver AutoUpdateKey="true">
              <tk:Scheme>
                <tk:Tk5DataXml FileName="WorkOrder/WorkOrdersAttachment.xml"/>
              </tk:Scheme>
            </tk:MetaDataResolver>
          </tk:Resolver>
          <tk:Relation>
            <tk:MasterFields>Id</tk:MasterFields>
            <tk:DetailFields>WoId</tk:DetailFields>
          </tk:Relation>
        </tk:Detail>
        <tk:TabSheets>
          <tk:TabSheet Id="All">
            <tk:Caption>
              <tk:Content>全部</tk:Content>
            </tk:Caption>
          </tk:TabSheet>
          <tk:TabSheet Id="DPQ">
            <tk:Caption>
              <tk:Content>待排期</tk:Content>
            </tk:Caption>
            <tk:Condition>WO_STATUS=3</tk:Condition>
          </tk:TabSheet>
          <tk:TabSheet Id="GDZX">
            <tk:Caption>
              <tk:Content>工单执行</tk:Content>
            </tk:Caption>
            <tk:Condition>WO_STATUS=4</tk:Condition>
          </tk:TabSheet>
          <tk:TabSheet Id="GDQR">
            <tk:Caption>
              <tk:Content>工单确认</tk:Content>
            </tk:Caption>
            <tk:Condition>WO_STATUS=5</tk:Condition>
          </tk:TabSheet>
          <tk:TabSheet Id="DYS">
            <tk:Caption>
              <tk:Content>待验收</tk:Content>
            </tk:Caption>
            <tk:Condition>WO_STATUS=6</tk:Condition>
          </tk:TabSheet>
          <tk:TabSheet Id="YWC">
            <tk:Caption>
              <tk:Content>已完成</tk:Content>
            </tk:Caption>
            <tk:Condition>WO_STATUS=7</tk:Condition>
          </tk:TabSheet>
          <tk:TabSheet Id="YGB">
            <tk:Caption>
              <tk:Content>已关闭</tk:Content>
            </tk:Caption>
            <tk:Condition>WO_STATUS=0</tk:Condition>
          </tk:TabSheet>
        </tk:TabSheets>
        <tk:FilterSql>(WO_STATUS=0 or WO_STATUS>=3)</tk:FilterSql>
        <tk:Operators>
          <tk:SimpleWorkflowListOperators ReadOnly="true"/>
        </tk:Operators>
        <tk:DetailOperators>
          <tk:SimpleWorkflowDetailOperators WorkflowName="WorkApprove" ReadOnly="true"/>
          <!--<tk:StandardOperators>
						<tk:Right>
							<tk:EmptyOperateRight/>
						</tk:Right>
						<tk:Operator Id="Submit" IconClass="icon-upload-alt" Position="Global" UseKey="true">
							<tk:Caption>
								<tk:Content>提交</tk:Content>
							</tk:Caption>
							<tk:Content>~/c/~source/C/WfCreate?WFName=WorkApprove</tk:Content>
						</tk:Operator>
					</tk:StandardOperators>-->
        </tk:DetailOperators>
      </tk:MasterDetailDbSource>
    </tk:Source>
    <tk:PageMaker>
      <tk:RazorModuleTemplatePageMaker ModuleTemplate="MasterDetail">
        <tk:PageTemplate Style="List">
          <tk:RazorData>
            <tk:NormalListData OperatorPosition="None"/>
          </tk:RazorData>
        </tk:PageTemplate>
        <tk:PageTemplate Style="Detail">
          <tk:RazorData>
            <tk:NormalMultiDetailData>
              <tk:TableData TableName="WO_WORK_ORDERS">
                <tk:ControlGroup>
                  <tk:GroupSection Order="200" EndOrder="300">
                    <tk:Caption>
                      <tk:Content>332</tk:Content>
                    </tk:Caption>
                  </tk:GroupSection>
                </tk:ControlGroup>
              </tk:TableData>
            </tk:NormalMultiDetailData>
          </tk:RazorData>
        </tk:PageTemplate>
      </tk:RazorModuleTemplatePageMaker>
    </tk:PageMaker>
    <!--<tk:RecordLog TableName="WO_WORK_ORDERS">
      <tk:DataPicker>
        <DataRecordLog/>
      </tk:DataPicker>
      <tk:LogData>
        <DataUpdateLog/>
      </tk:LogData>
    </tk:RecordLog>-->
  </tk:Module>
</tk:Toolkit>
