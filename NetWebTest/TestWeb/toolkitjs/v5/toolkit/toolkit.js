// URI.js
/*
 * URI.js - Mutating URLs
 *
 * Version: 1.13.2
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 */
(function(b,a){if(typeof exports==="object"){module.exports=a(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains"))}else{if(typeof define==="function"&&define.amd){define(["./punycode","./IPv6","./SecondLevelDomains"],a)}else{b.URI=a(b.punycode,b.IPv6,b.SecondLevelDomains,b)}}}(this,function(t,o,w,v){var f=v&&v.URI;function y(q,p){if(!(this instanceof y)){return new y(q,p)}if(q===undefined){if(typeof location!=="undefined"){q=location.href+""}else{q=""}}this.href(q);if(p!==undefined){return this.absoluteTo(p)}return this}y.version="1.13.2";var s=y.prototype;var n=Object.prototype.hasOwnProperty;function j(p){return p.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function m(p){if(p===undefined){return"Undefined"}return String(Object.prototype.toString.call(p)).slice(8,-1)}function r(p){return m(p)==="Array"}function k(p,B){var A={};var q,z;if(r(B)){for(q=0,z=B.length;q<z;q++){A[B[q]]=true}}else{A[B]=true}for(q=0,z=p.length;q<z;q++){if(A[p[q]]!==undefined){p.splice(q,1);z--;q--}}return p}function g(A,B){var q,z;if(r(B)){for(q=0,z=B.length;q<z;q++){if(!g(A,B[q])){return false}}return true}var p=m(B);for(q=0,z=A.length;q<z;q++){if(p==="RegExp"){if(typeof A[q]==="string"&&A[q].match(B)){return true}}else{if(A[q]===B){return true}}}return false}function h(z,A){if(!r(z)||!r(A)){return false}if(z.length!==A.length){return false}z.sort();A.sort();for(var p=0,q=z.length;p<q;p++){if(z[p]!==A[p]){return false}}return true}y._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:y.duplicateQueryParameters,escapeQuerySpace:y.escapeQuerySpace}};y.duplicateQueryParameters=false;y.escapeQuerySpace=true;y.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;y.idn_expression=/[^a-z0-9\.-]/i;y.punycode_expression=/(xn--)/i;y.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;y.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;y.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>???“”‘’]))/ig;y.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>???“”?‘’]+$/};y.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};y.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;y.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"};y.getDomAttribute=function(p){if(!p||!p.nodeName){return undefined}var q=p.nodeName.toLowerCase();if(q==="input"&&p.type!=="image"){return undefined}return y.domAttributes[q]};function i(p){return escape(p)}function x(p){return encodeURIComponent(p).replace(/[!'()*]/g,i).replace(/\*/g,"%2A")}y.encode=x;y.decode=decodeURIComponent;y.iso8859=function(){y.encode=escape;y.decode=unescape};y.unicode=function(){y.encode=x;y.decode=decodeURIComponent};y.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}};y.encodeQuery=function(z,q){var p=y.encode(z+"");if(q===undefined){q=y.escapeQuerySpace}return q?p.replace(/%20/g,"+"):p};y.decodeQuery=function(z,q){z+="";if(q===undefined){q=y.escapeQuerySpace}try{return y.decode(q?z.replace(/\+/g,"%20"):z)}catch(p){return z}};y.recodePath=function(A){var z=(A+"").split("/");for(var p=0,q=z.length;p<q;p++){z[p]=y.encodePathSegment(y.decode(z[p]))}return z.join("/")};y.decodePath=function(A){var z=(A+"").split("/");for(var p=0,q=z.length;p<q;p++){z[p]=y.decodePathSegment(z[p])}return z.join("/")};var c={encode:"encode",decode:"decode"};var b;var l=function(p,q){return function(z){return y[q](z+"").replace(y.characters[p][q].expression,function(A){return y.characters[p][q].map[A]})}};for(b in c){y[b+"PathSegment"]=l("pathname",c[b])}y.encodeReserved=l("reserved","encode");y.parse=function(z,p){var q;if(!p){p={}}q=z.indexOf("#");if(q>-1){p.fragment=z.substring(q+1)||null;z=z.substring(0,q)}q=z.indexOf("?");if(q>-1){p.query=z.substring(q+1)||null;z=z.substring(0,q)}if(z.substring(0,2)==="//"){p.protocol=null;z=z.substring(2);z=y.parseAuthority(z,p)}else{q=z.indexOf(":");if(q>-1){p.protocol=z.substring(0,q)||null;if(p.protocol&&!p.protocol.match(y.protocol_expression)){p.protocol=undefined}else{if(p.protocol==="file"){z=z.substring(q+3)}else{if(z.substring(q+1,q+3)==="//"){z=z.substring(q+3);z=y.parseAuthority(z,p)}else{z=z.substring(q+1);p.urn=true}}}}}p.path=z;return p};y.parseHost=function(A,q){var z=A.indexOf("/");var p;var B;if(z===-1){z=A.length}if(A.charAt(0)==="["){p=A.indexOf("]");q.hostname=A.substring(1,p)||null;q.port=A.substring(p+2,z)||null;if(q.port==="/"){q.port=null}}else{if(A.indexOf(":")!==A.lastIndexOf(":")){q.hostname=A.substring(0,z)||null;q.port=null}else{B=A.substring(0,z).split(":");q.hostname=B[0]||null;q.port=B[1]||null}}if(q.hostname&&A.substring(z).charAt(0)!=="/"){z++;A="/"+A}return A.substring(z)||"/"};y.parseAuthority=function(q,p){q=y.parseUserinfo(q,p);return y.parseHost(q,p)};y.parseUserinfo=function(A,q){var p=A.indexOf("/");var z=p>-1?A.lastIndexOf("@",p):A.indexOf("@");var B;if(z>-1&&(p===-1||z<p)){B=A.substring(0,z).split(":");q.username=B[0]?y.decode(B[0]):null;B.shift();q.password=B[0]?y.decode(B.join(":")):null;A=A.substring(z+1)}else{q.username=null;q.password=null}return A};y.parseQuery=function(D,p){if(!D){return{}}D=D.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!D){return{}}var z={};var C=D.split("&");var A=C.length;var E,B,F;for(var q=0;q<A;q++){E=C[q].split("=");B=y.decodeQuery(E.shift(),p);F=E.length?y.decodeQuery(E.join("="),p):null;if(z[B]){if(typeof z[B]==="string"){z[B]=[z[B]]}z[B].push(F)}else{z[B]=F}}return z};y.build=function(p){var q="";if(p.protocol){q+=p.protocol+":"}if(!p.urn&&(q||p.hostname)){q+="//"}q+=(y.buildAuthority(p)||"");if(typeof p.path==="string"){if(p.path.charAt(0)!=="/"&&typeof p.hostname==="string"){q+="/"}q+=p.path}if(typeof p.query==="string"&&p.query){q+="?"+p.query}if(typeof p.fragment==="string"&&p.fragment){q+="#"+p.fragment}return q};y.buildHost=function(p){var q="";if(!p.hostname){return""}else{if(y.ip6_expression.test(p.hostname)){q+="["+p.hostname+"]"}else{q+=p.hostname}}if(p.port){q+=":"+p.port}return q};y.buildAuthority=function(p){return y.buildUserinfo(p)+y.buildHost(p)};y.buildUserinfo=function(p){var q="";if(p.username){q+=y.encode(p.username);if(p.password){q+=":"+y.encode(p.password)}q+="@"}return q};y.buildQuery=function(p,q,z){var D="";var E,B,A,C;for(B in p){if(n.call(p,B)&&B){if(r(p[B])){E={};for(A=0,C=p[B].length;A<C;A++){if(p[B][A]!==undefined&&E[p[B][A]+""]===undefined){D+="&"+y.buildQueryParameter(B,p[B][A],z);if(q!==true){E[p[B][A]+""]=true}}}}else{if(p[B]!==undefined){D+="&"+y.buildQueryParameter(B,p[B],z)}}}}return D.substring(1)};y.buildQueryParameter=function(q,z,p){return y.encodeQuery(q,p)+(z!==null?"="+y.encodeQuery(z,p):"")};y.addQuery=function(p,z,A){if(typeof z==="object"){for(var q in z){if(n.call(z,q)){y.addQuery(p,q,z[q])}}}else{if(typeof z==="string"){if(p[z]===undefined){p[z]=A;return}else{if(typeof p[z]==="string"){p[z]=[p[z]]}}if(!r(A)){A=[A]}p[z]=p[z].concat(A)}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}}};y.removeQuery=function(p,B,C){var q,A,z;if(r(B)){for(q=0,A=B.length;q<A;q++){p[B[q]]=undefined}}else{if(typeof B==="object"){for(z in B){if(n.call(B,z)){y.removeQuery(p,z,B[z])}}}else{if(typeof B==="string"){if(C!==undefined){if(p[B]===C){p[B]=undefined}else{if(r(p[B])){p[B]=k(p[B],C)}}}else{p[B]=undefined}}else{throw new TypeError("URI.addQuery() accepts an object, string as the first parameter")}}}};y.hasQuery=function(q,A,C,D){if(typeof A==="object"){for(var z in A){if(n.call(A,z)){if(!y.hasQuery(q,z,A[z])){return false}}}return true}else{if(typeof A!=="string"){throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter")}}switch(m(C)){case"Undefined":return A in q;case"Boolean":var p=Boolean(r(q[A])?q[A].length:q[A]);return C===p;case"Function":return !!C(q[A],A,q);case"Array":if(!r(q[A])){return false}var B=D?g:h;return B(q[A],C);case"RegExp":if(!r(q[A])){return Boolean(q[A]&&q[A].match(C))}if(!D){return false}return g(q[A],C);case"Number":C=String(C);case"String":if(!r(q[A])){return q[A]===C}if(!D){return false}return g(q[A],C);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}};y.commonPath=function(q,A){var p=Math.min(q.length,A.length);var z;for(z=0;z<p;z++){if(q.charAt(z)!==A.charAt(z)){z--;break}}if(z<1){return q.charAt(0)===A.charAt(0)&&q.charAt(0)==="/"?"/":""}if(q.charAt(z)!=="/"||A.charAt(z)!=="/"){z=q.substring(0,z).lastIndexOf("/")}return q.substring(0,z+1)};y.withinString=function(J,C,F){F||(F={});var z=F.start||y.findUri.start;var q=F.end||y.findUri.end;var A=F.trim||y.findUri.trim;var p=/[a-z0-9-]=["']?$/i;z.lastIndex=0;while(true){var E=z.exec(J);if(!E){break}var I=E.index;if(F.ignoreHtml){var B=J.slice(Math.max(I-3,0),I);if(B&&p.test(B)){continue}}var D=I+J.slice(I).search(q);var H=J.slice(I,D).replace(A,"");if(F.ignore&&F.ignore.test(H)){continue}D=I+H.length;var G=C(H,I,D,J);J=J.slice(0,I)+G+J.slice(D);z.lastIndex=I+G.length}z.lastIndex=0;return J};y.ensureValidHostname=function(p){if(p.match(y.invalid_hostname_characters)){if(!t){throw new TypeError('Hostname "'+p+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available')}if(t.toASCII(p).match(y.invalid_hostname_characters)){throw new TypeError('Hostname "'+p+'" contains characters other than [A-Z0-9.-]')}}};y.noConflict=function(p){if(p){var q={URI:this.noConflict()};if(v.URITemplate&&typeof v.URITemplate.noConflict==="function"){q.URITemplate=v.URITemplate.noConflict()}if(v.IPv6&&typeof v.IPv6.noConflict==="function"){q.IPv6=v.IPv6.noConflict()}if(v.SecondLevelDomains&&typeof v.SecondLevelDomains.noConflict==="function"){q.SecondLevelDomains=v.SecondLevelDomains.noConflict()}return q}else{if(v.URI===this){v.URI=f}}return this};s.build=function(p){if(p===true){this._deferred_build=true}else{if(p===undefined||this._deferred_build){this._string=y.build(this._parts);this._deferred_build=false}}return this};s.clone=function(){return new y(this)};s.valueOf=s.toString=function(){return this.build(false)._string};c={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};l=function(p){return function(z,q){if(z===undefined){return this._parts[p]||""}else{this._parts[p]=z||null;this.build(!q);return this}}};for(b in c){s[b]=l(c[b])}c={query:"?",fragment:"#"};l=function(q,p){return function(A,z){if(A===undefined){return this._parts[q]||""}else{if(A!==null){A=A+"";if(A.charAt(0)===p){A=A.substring(1)}}this._parts[q]=A;this.build(!z);return this}}};for(b in c){s[b]=l(b,c[b])}c={search:["?","query"],hash:["#","fragment"]};l=function(q,p){return function(B,z){var A=this[q](B,z);return typeof A==="string"&&A.length?(p+A):A}};for(b in c){s[b]=l(c[b][1],c[b][0])}s.pathname=function(z,p){if(z===undefined||z===true){var q=this._parts.path||(this._parts.hostname?"/":"");return z?y.decodePath(q):q}else{this._parts.path=z?y.recodePath(z):"/";this.build(!p);return this}};s.path=s.pathname;s.href=function(B,A){var C;if(B===undefined){return this.toString()}this._string="";this._parts=y._parts();var q=B instanceof y;var p=typeof B==="object"&&(B.hostname||B.path||B.pathname);if(B.nodeName){var z=y.getDomAttribute(B);B=B[z]||"";p=false}if(!q&&p&&B.pathname!==undefined){B=B.toString()}if(typeof B==="string"){this._parts=y.parse(B,this._parts)}else{if(q||p){var D=q?B._parts:B;for(C in D){if(n.call(this._parts,C)){this._parts[C]=D[C]}}}else{throw new TypeError("invalid input")}}this.build(!A);return this};s.is=function(F){var q=false;var z=false;var A=false;var B=false;var E=false;var p=false;var C=false;var D=!this._parts.urn;if(this._parts.hostname){D=false;z=y.ip4_expression.test(this._parts.hostname);A=y.ip6_expression.test(this._parts.hostname);q=z||A;B=!q;E=B&&w&&w.has(this._parts.hostname);p=B&&y.idn_expression.test(this._parts.hostname);C=B&&y.punycode_expression.test(this._parts.hostname)}switch(F.toLowerCase()){case"relative":return D;case"absolute":return !D;case"domain":case"name":return B;case"sld":return E;case"ip":return q;case"ip4":case"ipv4":case"inet4":return z;case"ip6":case"ipv6":case"inet6":return A;case"idn":return p;case"url":return !this._parts.urn;case"urn":return !!this._parts.urn;case"punycode":return C}return null};var e=s.protocol;var d=s.port;var a=s.hostname;s.protocol=function(q,p){if(q!==undefined){if(q){q=q.replace(/:(\/\/)?$/,"");if(!q.match(y.protocol_expression)){throw new TypeError('Protocol "'+q+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]")}}}return e.call(this,q,p)};s.scheme=s.protocol;s.port=function(q,p){if(this._parts.urn){return q===undefined?"":this}if(q!==undefined){if(q===0){q=null}if(q){q+="";if(q.charAt(0)===":"){q=q.substring(1)}if(q.match(/[^0-9]/)){throw new TypeError('Port "'+q+'" contains characters other than [0-9]')}}}return d.call(this,q,p)};s.hostname=function(q,p){if(this._parts.urn){return q===undefined?"":this}if(q!==undefined){var z={};y.parseHost(q,z);q=z.hostname}return a.call(this,q,p)};s.host=function(q,p){if(this._parts.urn){return q===undefined?"":this}if(q===undefined){return this._parts.hostname?y.buildHost(this._parts):""}else{y.parseHost(q,this._parts);this.build(!p);return this}};s.authority=function(q,p){if(this._parts.urn){return q===undefined?"":this}if(q===undefined){return this._parts.hostname?y.buildAuthority(this._parts):""}else{y.parseAuthority(q,this._parts);this.build(!p);return this}};s.userinfo=function(z,p){if(this._parts.urn){return z===undefined?"":this}if(z===undefined){if(!this._parts.username){return""}var q=y.buildUserinfo(this._parts);return q.substring(0,q.length-1)}else{if(z[z.length-1]!=="@"){z+="@"}y.parseUserinfo(z,this._parts);this.build(!p);return this}};s.resource=function(z,p){var q;if(z===undefined){return this.path()+this.search()+this.hash()}q=y.parse(z);this._parts.path=q.path;this._parts.query=q.query;this._parts.fragment=q.fragment;this.build(!p);return this};s.subdomain=function(C,p){if(this._parts.urn){return C===undefined?"":this}if(C===undefined){if(!this._parts.hostname||this.is("IP")){return""}var z=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,z)||""}else{var q=this._parts.hostname.length-this.domain().length;var B=this._parts.hostname.substring(0,q);var A=new RegExp("^"+j(B));if(C&&C.charAt(C.length-1)!=="."){C+="."}if(C){y.ensureValidHostname(C)}this._parts.hostname=this._parts.hostname.replace(A,C);this.build(!p);return this}};s.domain=function(B,p){if(this._parts.urn){return B===undefined?"":this}if(typeof B==="boolean"){p=B;B=undefined}if(B===undefined){if(!this._parts.hostname||this.is("IP")){return""}var A=this._parts.hostname.match(/\./g);if(A&&A.length<2){return this._parts.hostname}var q=this._parts.hostname.length-this.tld(p).length-1;q=this._parts.hostname.lastIndexOf(".",q-1)+1;return this._parts.hostname.substring(q)||""}else{if(!B){throw new TypeError("cannot set domain empty")}y.ensureValidHostname(B);if(!this._parts.hostname||this.is("IP")){this._parts.hostname=B}else{var z=new RegExp(j(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(z,B)}this.build(!p);return this}};s.tld=function(B,p){if(this._parts.urn){return B===undefined?"":this}if(typeof B==="boolean"){p=B;B=undefined}if(B===undefined){if(!this._parts.hostname||this.is("IP")){return""}var q=this._parts.hostname.lastIndexOf(".");var A=this._parts.hostname.substring(q+1);if(p!==true&&w&&w.list[A.toLowerCase()]){return w.get(this._parts.hostname)||A}return A}else{var z;if(!B){throw new TypeError("cannot set TLD empty")}else{if(B.match(/[^a-zA-Z0-9-]/)){if(w&&w.is(B)){z=new RegExp(j(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(z,B)}else{throw new TypeError('TLD "'+B+'" contains characters other than [A-Z0-9]')}}else{if(!this._parts.hostname||this.is("IP")){throw new ReferenceError("cannot set TLD on non-domain host")}else{z=new RegExp(j(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(z,B)}}}this.build(!p);return this}};s.directory=function(D,p){if(this._parts.urn){return D===undefined?"":this}if(D===undefined||D===true){if(!this._parts.path&&!this._parts.hostname){return""}if(this._parts.path==="/"){return"/"}var A=this._parts.path.length-this.filename().length-1;var C=this._parts.path.substring(0,A)||(this._parts.hostname?"/":"");return D?y.decodePath(C):C}else{var z=this._parts.path.length-this.filename().length;var q=this._parts.path.substring(0,z);var B=new RegExp("^"+j(q));if(!this.is("relative")){if(!D){D="/"}if(D.charAt(0)!=="/"){D="/"+D}}if(D&&D.charAt(D.length-1)!=="/"){D+="/"}D=y.recodePath(D);this._parts.path=this._parts.path.replace(B,D);this.build(!p);return this}};s.filename=function(C,p){if(this._parts.urn){return C===undefined?"":this}if(C===undefined||C===true){if(!this._parts.path||this._parts.path==="/"){return""}var z=this._parts.path.lastIndexOf("/");var B=this._parts.path.substring(z+1);return C?y.decodePathSegment(B):B}else{var q=false;if(C.charAt(0)==="/"){C=C.substring(1)}if(C.match(/\.?\//)){q=true}var A=new RegExp(j(this.filename())+"$");C=y.recodePath(C);this._parts.path=this._parts.path.replace(A,C);if(q){this.normalizePath(p)}else{this.build(!p)}return this}};s.suffix=function(E,p){if(this._parts.urn){return E===undefined?"":this}if(E===undefined||E===true){if(!this._parts.path||this._parts.path==="/"){return""}var q=this.filename();var z=q.lastIndexOf(".");var C,B;if(z===-1){return""}C=q.substring(z+1);B=(/^[a-z0-9%]+$/i).test(C)?C:"";return E?y.decodePathSegment(B):B}else{if(E.charAt(0)==="."){E=E.substring(1)}var D=this.suffix();var A;if(!D){if(!E){return this}this._parts.path+="."+y.recodePath(E)}else{if(!E){A=new RegExp(j("."+D)+"$")}else{A=new RegExp(j(D)+"$")}}if(A){E=y.recodePath(E);this._parts.path=this._parts.path.replace(A,E)}this.build(!p);return this}};s.segment=function(C,F,q){var E=this._parts.urn?":":"/";var B=this.path();var p=B.substring(0,1)==="/";var D=B.split(E);if(C!==undefined&&typeof C!=="number"){q=F;F=C;C=undefined}if(C!==undefined&&typeof C!=="number"){throw new Error('Bad segment "'+C+'", must be 0-based integer')}if(p){D.shift()}if(C<0){C=Math.max(D.length+C,0)}if(F===undefined){return C===undefined?D:D[C]}else{if(C===null||D[C]===undefined){if(r(F)){D=[];for(var z=0,A=F.length;z<A;z++){if(!F[z].length&&(!D.length||!D[D.length-1].length)){continue}if(D.length&&!D[D.length-1].length){D.pop()}D.push(F[z])}}else{if(F||(typeof F==="string")){if(D[D.length-1]===""){D[D.length-1]=F}else{D.push(F)}}}}else{if(F||(typeof F==="string"&&F.length)){D[C]=F}else{D.splice(C,1)}}}if(p){D.unshift("")}return this.path(D.join(E),q)};s.segmentCoded=function(A,C,p){var B,q,z;if(typeof A!=="number"){p=C;C=A;A=undefined}if(C===undefined){B=this.segment(A,C,p);if(!r(B)){B=B!==undefined?y.decode(B):undefined}else{for(q=0,z=B.length;q<z;q++){B[q]=y.decode(B[q])}}return B}if(!r(C)){C=typeof C==="string"?y.encode(C):C}else{for(q=0,z=C.length;q<z;q++){C[q]=y.decode(C[q])}}return this.segment(A,C,p)};var u=s.query;s.query=function(A,p){if(A===true){return y.parseQuery(this._parts.query,this._parts.escapeQuerySpace)}else{if(typeof A==="function"){var q=y.parseQuery(this._parts.query,this._parts.escapeQuerySpace);var z=A.call(this,q);this._parts.query=y.buildQuery(z||q,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!p);return this}else{if(A!==undefined&&typeof A!=="string"){this._parts.query=y.buildQuery(A,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!p);return this}else{return u.call(this,A,p)}}}};s.setQuery=function(A,B,p){var q=y.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof A==="object"){for(var z in A){if(n.call(A,z)){q[z]=A[z]}}}else{if(typeof A==="string"){q[A]=B!==undefined?B:null}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}}this._parts.query=y.buildQuery(q,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof A!=="string"){p=B}this.build(!p);return this};s.addQuery=function(z,A,p){var q=y.parseQuery(this._parts.query,this._parts.escapeQuerySpace);y.addQuery(q,z,A===undefined?null:A);this._parts.query=y.buildQuery(q,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof z!=="string"){p=A}this.build(!p);return this};s.removeQuery=function(z,A,p){var q=y.parseQuery(this._parts.query,this._parts.escapeQuerySpace);y.removeQuery(q,z,A);this._parts.query=y.buildQuery(q,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof z!=="string"){p=A}this.build(!p);return this};s.hasQuery=function(q,z,A){var p=y.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return y.hasQuery(p,q,z,A)};s.setSearch=s.setQuery;s.addSearch=s.addQuery;s.removeSearch=s.removeQuery;s.hasSearch=s.hasQuery;s.normalize=function(){if(this._parts.urn){return this.normalizeProtocol(false).normalizeQuery(false).normalizeFragment(false).build()}return this.normalizeProtocol(false).normalizeHostname(false).normalizePort(false).normalizePath(false).normalizeQuery(false).normalizeFragment(false).build()};s.normalizeProtocol=function(p){if(typeof this._parts.protocol==="string"){this._parts.protocol=this._parts.protocol.toLowerCase();this.build(!p)}return this};s.normalizeHostname=function(p){if(this._parts.hostname){if(this.is("IDN")&&t){this._parts.hostname=t.toASCII(this._parts.hostname)}else{if(this.is("IPv6")&&o){this._parts.hostname=o.best(this._parts.hostname)}}this._parts.hostname=this._parts.hostname.toLowerCase();this.build(!p)}return this};s.normalizePort=function(p){if(typeof this._parts.protocol==="string"&&this._parts.port===y.defaultPorts[this._parts.protocol]){this._parts.port=null;this.build(!p)}return this};s.normalizePath=function(C){if(this._parts.urn){return this}if(!this._parts.path||this._parts.path==="/"){return this}var B;var z=this._parts.path;var p="";var q,A;if(z.charAt(0)!=="/"){B=true;z="/"+z}z=z.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");if(B){p=z.substring(1).match(/^(\.\.\/)+/)||"";if(p){p=p[0]}}while(true){q=z.indexOf("/..");if(q===-1){break}else{if(q===0){z=z.substring(3);continue}}A=z.substring(0,q).lastIndexOf("/");if(A===-1){A=q}z=z.substring(0,A)+z.substring(q+3)}if(B&&this.is("relative")){z=p+z.substring(1)}z=y.recodePath(z);this._parts.path=z;this.build(!C);return this};s.normalizePathname=s.normalizePath;s.normalizeQuery=function(p){if(typeof this._parts.query==="string"){if(!this._parts.query.length){this._parts.query=null}else{this.query(y.parseQuery(this._parts.query,this._parts.escapeQuerySpace))}this.build(!p)}return this};s.normalizeFragment=function(p){if(!this._parts.fragment){this._parts.fragment=null;this.build(!p)}return this};s.normalizeSearch=s.normalizeQuery;s.normalizeHash=s.normalizeFragment;s.iso8859=function(){var q=y.encode;var p=y.decode;y.encode=escape;y.decode=decodeURIComponent;this.normalize();y.encode=q;y.decode=p;return this};s.unicode=function(){var q=y.encode;var p=y.decode;y.encode=x;y.decode=unescape;this.normalize();y.encode=q;y.decode=p;return this};s.readable=function(){var E=this.clone();E.username("").password("").normalize();var D="";if(E._parts.protocol){D+=E._parts.protocol+"://"}if(E._parts.hostname){if(E.is("punycode")&&t){D+=t.toUnicode(E._parts.hostname);if(E._parts.port){D+=":"+E._parts.port}}else{D+=E.host()}}if(E._parts.hostname&&E._parts.path&&E._parts.path.charAt(0)!=="/"){D+="/"}D+=E.path(true);if(E._parts.query){var B="";for(var p=0,C=E._parts.query.split("&"),A=C.length;p<A;p++){var z=(C[p]||"").split("=");B+="&"+y.decodeQuery(z[0],this._parts.escapeQuerySpace).replace(/&/g,"%26");if(z[1]!==undefined){B+="="+y.decodeQuery(z[1],this._parts.escapeQuerySpace).replace(/&/g,"%26")}}D+="?"+B.substring(1)}D+=y.decodeQuery(E.hash(),true);return D};s.absoluteTo=function(q){var D=this.clone();var C=["protocol","username","password","hostname","port"];var z,A,B;if(this._parts.urn){throw new Error("URNs do not have any generally defined hierarchical components")}if(!(q instanceof y)){q=new y(q)}if(!D._parts.protocol){D._parts.protocol=q._parts.protocol}if(this._parts.hostname){return D}for(A=0;(B=C[A]);A++){D._parts[B]=q._parts[B]}if(!D._parts.path){D._parts.path=q._parts.path;if(!D._parts.query){D._parts.query=q._parts.query}}else{if(D._parts.path.substring(-2)===".."){D._parts.path+="/"}}if(D.path().charAt(0)!=="/"){z=q.directory();D._parts.path=(z?(z+"/"):"")+D._parts.path;D.normalizePath()}D.build();return D};s.relativeTo=function(p){var C=this.clone().normalize();var D,q,A,E,z;if(C._parts.urn){throw new Error("URNs do not have any generally defined hierarchical components")}p=new y(p).normalize();D=C._parts;q=p._parts;E=C.path();z=p.path();if(E.charAt(0)!=="/"){throw new Error("URI is already relative")}if(z.charAt(0)!=="/"){throw new Error("Cannot calculate a URI relative to another relative URI")}if(D.protocol===q.protocol){D.protocol=null}if(D.username!==q.username||D.password!==q.password){return C.build()}if(D.protocol!==null||D.username!==null||D.password!==null){return C.build()}if(D.hostname===q.hostname&&D.port===q.port){D.hostname=null;D.port=null}else{return C.build()}if(E===z){D.path="";return C.build()}A=y.commonPath(C.path(),p.path());if(!A){return C.build()}var B=q.path.substring(A.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");D.path=B+D.path.substring(A.length);return C.build()};s.equals=function(F){var z=this.clone();var C=new y(F);var A={};var D={};var p={};var B,E,q;z.normalize();C.normalize();if(z.toString()===C.toString()){return true}B=z.query();E=C.query();z.query("");C.query("");if(z.toString()!==C.toString()){return false}if(B.length!==E.length){return false}A=y.parseQuery(B,this._parts.escapeQuerySpace);D=y.parseQuery(E,this._parts.escapeQuerySpace);for(q in A){if(n.call(A,q)){if(!r(A[q])){if(A[q]!==D[q]){return false}}else{if(!h(A[q],D[q])){return false}}p[q]=true}}for(q in D){if(n.call(D,q)){if(!p[q]){return false}}}return true};s.duplicateQueryParameters=function(p){this._parts.duplicateQueryParameters=!!p;return this};s.escapeQuerySpace=function(p){this._parts.escapeQuerySpace=!!p;return this};return y}));
// jqextend.js
(function(a){if(!a){return}a.extend(a.browser,{client:function(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,bodyWidth:document.body.clientWidth,bodyHeight:document.body.clientHeight}},scroll:function(){return{width:document.documentElement.scrollWidth,height:document.documentElement.scrollHeight,bodyWidth:document.body.scrollWidth,bodyHeight:document.body.scrollHeight,left:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),top:Math.max(document.documentElement.scrollTop,document.body.scrollTop)}},screen:function(){return{width:window.screen.width,height:window.screen.height}},isIPad:(/iPad/i).test(navigator.userAgent),language:function(){return(navigator.language||navigator.userLanguage||"").toLowerCase()}});a.fn.tagName=function(){if(this.length==0){return""}return this[0].tagName.toLowerCase()};a.fn.optionText=function(){if(this.length==0){return""}var b=this[0];if(b.selectedIndex==-1){return""}return b.options[b.selectedIndex].text};a.fn.attrJSON=function(b){return(this.attr(b||"rel")||"").parseAttrJSON()};a.fn.bindJqueryUI=function(b,d){if(this.length==0){return}var c=this;Toolkit.load("jqueryui",function(){c[b](d)});return this};a.fn.bindToolkitUI=function(c,b){if(this.length==0||!Toolkit){return this}if(Toolkit.ui&&Toolkit.ui[c]){Toolkit.ui[c](this,b)}return this};a.fn.bindToolkitUIExtend=function(c,e,d){if(this.length==0||!Toolkit){return this}var b=this;Toolkit.load(c,function(){if(!Toolkit.ui[e]){return}Toolkit.ui[e](b,d)});return this};a.fn.bindToolkitData=function(c,b){if(this.length==0||!Toolkit){return this}if(Toolkit.data&&Toolkit.data[c]){Toolkit.data[c](this,b)}return this}})(jQuery);
// jsextend.js
(function($){if(!$){return}$.extend(String.prototype,{trim:function(){return this.replace(/(^\s*)|(\s*$)/g,"")},ltrim:function(){return this.replace(/(^\s*)/g,"")},rtrim:function(){return this.replace(/(\s*$)/g,"")},trimAll:function(){return this.replace(/\s/g,"")},left:function(len){return this.substring(0,len)},right:function(len){if(this.length<=len){return this}return this.substring(this.length-len,this.length)},reverse:function(){return this.split("").reverse().join("")},startWith:function(start,noCase){var index=noCase?this.toLowerCase().indexOf(start.toLowerCase()):this.indexOf(start);return !index},endWith:function(end,noCase){return noCase?(new RegExp(end.toLowerCase()+"$").test(this.toLowerCase().trim())):(new RegExp(end+"$").test(this.trim()))},sliceAfter:function(str){if(this.indexOf(str)<0){return""}return this.substring(this.indexOf(str)+str.length,this.length)},sliceBefore:function(str){if(this.indexOf(str)<0){return""}return this.substring(0,this.indexOf(str))},getByteLength:function(){return this.replace(/[^\x00-\xff]/ig,"xx").length},subByte:function(len,s){if(len<0||this.getByteLength()<=len){return this}var str=this;str=str.substr(0,len).replace(/([^\x00-\xff])/g,"\x241 ").substr(0,len).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"\x241");return str+(s||"")},textToHtml:function(){return this.replace(/</ig,"&lt;").replace(/>/ig,"&gt;").replace(/\r\n/ig,"<br>").replace(/\n/ig,"<br>")},htmlToText:function(){return this.replace(/<br>/ig,"\r\n")},htmlEncode:function(){var text=this;var re={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};for(i in re){text=text.replace(new RegExp(i,"g"),re[i])}return text},htmlDecode:function(){var text=this;var re={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"'};for(i in re){text=text.replace(new RegExp(i,"g"),re[i])}return text},stripHtml:function(){return this.replace(/(<\/?[^>\/]*)\/?>/ig,"")},stripScript:function(){return this.replace(/<script(.|\n)*\/script>\s*/ig,"").replace(/on[a-z]*?\s*?=".*?"/ig,"")},replaceAll:function(os,ns){return this.replace(new RegExp(os,"gm"),ns)},escapeReg:function(){return this.replace(new RegExp("([.*+?^=!:\x24{}()|[\\]/\\\\])","g"),"\\\x241")},getQueryValue:function(name){var reg=new RegExp("(^|&|\\?|#)"+name.escapeReg()+"=([^&]*)(&|\x24)","");var match=this.match(reg);return(match)?match[2]:""},getQueryJson:function(){if(this.lastIndexOf("?")==-1||this.right(1)=="?"){return{}}var query=this.substr(this.indexOf("?")+1),params=query.split("&"),len=params.length,result={},key,value,item,param;for(var i=0;i<len;i++){param=params[i].split("=");key=param[0];value=param[1];item=result[key];if("undefined"==typeof item){result[key]=unescape(value)}else{if(Object.prototype.toString.call(item)=="[object Array]"){item.push(value)}else{result[key]=[item,value]}}}return result},getPathName:function(){return(this.lastIndexOf("?")==-1)?this.toString():this.substring(0,this.lastIndexOf("?"))},getFilePath:function(){return this.substring(0,this.lastIndexOf("/")+1)},getFileName:function(){return this.substring(this.lastIndexOf("/")+1)},getFileExt:function(){return this.substring(this.lastIndexOf(".")+1)},parseDate:function(){return(new Date()).parse(this.toString())},parseJSON:function(){try{return !(/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(this.replace(/"(\\.|[^"\\])*"/g,"")))&&eval("("+this.toString()+")")}catch(e){return false}},parseAttrJSON:function(){var d={},a=this.toString().split(";");for(var i=0;i<a.length;i++){if(a[i].trim()==""||a[i].indexOf(":")<1){continue}var b=a[i].split(":");if(b[0].trim()!=""&&b[1].trim()!=""){d[b[0].toCamelCase()]=b[1]}}return d},isURL:function(){return(new RegExp(/(http[s]?|ftp):\/\/[^\/\.]+?\..+\w$/i).test(this.trim()))},_pad:function(width,ch,side){var str=[side?"":this,side?this:""];while(str[side].length<(width?width:0)&&(str[side]=str[1]+(ch||" ")+str[0])){}return str[side]},padLeft:function(width,ch){if(this.length>=width){return this.toString()}return this._pad(width,ch,0)},padRight:function(width,ch){if(this.length>=width){return this.toString()}return this._pad(width,ch,1)},toHalfWidth:function(){return this.replace(/[\uFF01-\uFF5E]/g,function(c){return String.fromCharCode(c.charCodeAt(0)-65248)}).replace(/\u3000/g," ")},toCamelCase:function(){if(this.indexOf("-")<0&&this.indexOf("_")<0){return this}return this.replace(/[-_][^-_]/g,function(match){return match.charAt(1).toUpperCase()})},format:function(){var result=this;if(arguments.length>0){parameters=$.makeArray(arguments);$.each(parameters,function(i,n){result=result.replace(new RegExp("\\{"+i+"\\}","g"),n)})}return result},substitute:function(data){if(data&&typeof(data)=="object"){return this.replace(/\{([^{}]+)\}/g,function(match,key){var value=data[key];return(value!==undefined)?""+value:""})}else{return this.toString()}}});$.extend(Number.prototype,{comma:function(length){if(!length||length<1){length=3}source=(""+this).split(".");source[0]=source[0].replace(new RegExp("(\\d)(?=(\\d{"+length+"})+$)","ig"),"$1,");return source.join(".")},randomInt:function(min,max){return Math.floor(Math.random()*(max-min+1)+min)},padLeft:function(width,ch){return(""+this).padLeft(width,ch)},padRight:function(width,ch){return(""+this).padRight(width,ch)}});$.extend(Array.prototype,{indexOf:function(item,it){for(var i=0;i<this.length;i++){if(item==((it)?this[i][it]:this[i])){return i}}return -1},remove:function(item,it){this.removeAt(this.indexOf(item,it))},removeAt:function(idx){if(idx>=0&&idx<this.length){for(var i=idx;i<this.length-1;i++){this[i]=this[i+1]}this.length--}},removeEmpty:function(){var arr=[];for(var i=0;i<this.length;i++){if(this[i].trim()!=""){arr.push(this[i].trim())}}return arr},add:function(item){if(this.indexOf(item)>-1){return false}else{this.push(item);return true}},swap:function(i,j){if(i<this.length&&j<this.length&&i!=j){var item=this[i];this[i]=this[j];this[j]=item}},filter:function(it,item){var arr=[];for(var i=0;i<this.length;i++){if(typeof(item)=="undefined"){arr.push(this[i][it])}else{if(this[i][it]==item){arr.push(this[i])}}}return arr},sortby:function(it,dt,od){var compareValues=function(v1,v2,dt,od){if(dt=="int"){v1=parseInt(v1);v2=parseInt(v2)}else{if(dt=="float"){v1=parseFloat(v1);v2=parseFloat(v2)}}var ret=0;if(v1<v2){ret=1}if(v1>v2){ret=-1}if(od=="desc"){ret=0-ret}return ret};var newdata=new Array();for(var i=0;i<this.length;i++){newdata[newdata.length]=this[i]}for(var i=0;i<newdata.length;i++){var minIdx=i;var minData=(it!="")?newdata[i][it]:newdata[i];for(var j=i+1;j<newdata.length;j++){var tmpData=(it!="")?newdata[j][it]:newdata[j];var cmp=compareValues(minData,tmpData,dt,od);if(cmp<0){minIdx=j;minData=tmpData}}if(minIdx>i){var _child=newdata[minIdx];newdata[minIdx]=newdata[i];newdata[i]=_child}}return newdata}});$.extend(Date.prototype,{parse:function(time){if(typeof(time)=="string"){if(time.indexOf("GMT")>0||time.indexOf("gmt")>0||!isNaN(Date.parse(time))){return this.parseGMT(time)}else{if(time.indexOf("UTC")>0||time.indexOf("utc")>0||time.indexOf(",")>0){return this.parseUTC(time)}else{return this.parseCommon(time)}}}return new Date()},parseGMT:function(time){this.setTime(Date.parse(time));return this},parseUTC:function(time){return(new Date(time))},parseCommon:function(time){var d=time.split(/ |T/),d1=d.length>1?d[1].split(/[^\d]/):[0,0,0],d0=d[0].split(/[^\d]/);return new Date(d0[0]-0,d0[1]-1,d0[2]-0,d1[0]-0,d1[1]-0,d1[2]-0)},dateAdd:function(type,val){var _y=this.getFullYear();var _m=this.getMonth();var _d=this.getDate();var _h=this.getHours();var _n=this.getMinutes();var _s=this.getSeconds();switch(type){case"y":this.setFullYear(_y+val);break;case"m":this.setMonth(_m+val);break;case"d":this.setDate(_d+val);break;case"h":this.setHours(_h+val);break;case"n":this.setMinutes(_n+val);break;case"s":this.setSeconds(_s+val);break}return this},dateDiff:function(type,date2){var diff=date2-this;switch(type){case"w":return diff/1000/3600/24/7;case"d":return diff/1000/3600/24;case"h":return diff/1000/3600;case"n":return diff/1000/60;case"s":return diff/1000}},format:function(format){if(isNaN(this)){return""}var o={"m+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"n+":this.getMinutes(),"s+":this.getSeconds(),S:this.getMilliseconds(),W:["日","一","二","三","四","五","六"][this.getDay()],"q+":Math.floor((this.getMonth()+3)/3)};if(format.indexOf("am/pm")>=0){format=format.replace("am/pm",(o["h+"]>=12)?"下午":"上午");if(o["h+"]>=12){o["h+"]-=12}}if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return format}})})(jQuery);
// toolkit.core.js
(function($){if(!$||window.Toolkit){return}window.Toolkit={};jQuery.ajaxSetup({cache:false});Toolkit.namespace=function(name,sep){var s=name.split(sep||"."),d={},o=function(a,b,c){if(c<b.length){if(!a[b[c]]){a[b[c]]={}}d=a[b[c]];o(a[b[c]],b,c+1)}};o(window,s,0);return d};Toolkit.load=function(service,action,params){if($.isArray(service)){var url=service.join(",");var urlsize=service.length;var status=Toolkit.loader.checkFileLoader(url);if(status==urlsize+1){if(typeof(action)=="function"){action()}}else{if(status>0){Toolkit.loader.addExecute(url,action)}else{if(status==0){Toolkit.loader.addExecute(url,action);Toolkit.loader.fileLoader[url]=1;Toolkit.debug("开始加载JS",url);for(var i=0;i<urlsize;i++){Toolkit.load(service[i],function(){Toolkit.loader.fileLoader[url]++;if(Toolkit.loader.fileLoader[url]==urlsize+1){Toolkit.debug("完成加载JS",url);Toolkit.loader.execute(url)}})}}}}}else{if(Toolkit.loader.serviceLibs[service]&&Toolkit.loader.serviceLibs[service].requires){Toolkit.load(Toolkit.loader.serviceLibs[service].requires,function(){Toolkit.load.run(service,action,params)})}else{Toolkit.load.run(service,action,params)}}};Toolkit.load.add=function(key,data){if(Toolkit.loader.serviceLibs[key]){return}Toolkit.loader.serviceLibs[key]=data};Toolkit.load.extend=function(key,data){if(!Toolkit.loader.serviceLibs[key]){return}$.extend(Toolkit.loader.serviceLibs[key],data)};Toolkit.load.setPath=function(path){Toolkit.loader.serviceBase=path};Toolkit.load.run=function(service,act,params){var action=(typeof(act)=="string")?(function(){try{var o=eval("Toolkit."+service);if(o&&o[act]){o[act](params)}}catch(e){}}):(act||function(){});if(Toolkit.loader.checkService(service)){action();return}var url=Toolkit.loader.getServiceUrl(service);var status=Toolkit.loader.checkFileLoader(url);if(status==2){action()}else{if(status==1){Toolkit.loader.addExecute(url,action)}else{if(status==0){if($('script[src="'+url+'"]').length>0){Toolkit.loader.fileLoader[url]=2;action()}else{Toolkit.loader.addExecute(url,action);Toolkit.loader.addScript(service)}}else{Toolkit.debug("加载异常",service)}}}};Toolkit.loader={};Toolkit.loader.fileLoader={};Toolkit.loader.executeLoader={};Toolkit.loader.serviceBase=(function(){return $("script:last")[0].src.sliceBefore("toolkit/")})();Toolkit.loader.serviceLibs={};Toolkit.loader.checkService=function(service){if(service.isURL()){return false}try{if(service.indexOf(".")>0){var o=eval("Toolkit."+service);return(typeof(o)!="undefined")}return false}catch(e){return false}};Toolkit.loader.checkFileLoader=function(url){return(url!="")?(this.fileLoader[url]||0):-1};Toolkit.loader.getServiceUrl=function(service){var url="";if(service.isURL()){url=service}else{if(this.serviceLibs[service]){url=(this.serviceLibs[service].js.isURL())?this.serviceLibs[service].js:(this.serviceBase+this.serviceLibs[service].js)}}return url};Toolkit.loader.execute=function(url){if(this.executeLoader[url]){for(var i=0;i<this.executeLoader[url].length;i++){this.executeLoader[url][i]()}this.executeLoader[url]=null}};Toolkit.loader.addExecute=function(url,action){if(typeof(action)!="function"){return}if(!this.executeLoader[url]){this.executeLoader[url]=[]}this.executeLoader[url].push(action)};Toolkit.loader.addScript=function(service){var this_=this;if(service.isURL()){var url=service;this.getScript(url,function(){this_.fileLoader[url]=2;Toolkit.debug("完成加载JS",url);Toolkit.loader.execute(url)})}else{if(this.serviceLibs[service]){if(this.serviceLibs[service].css){var url=(this.serviceLibs[service].css.isURL())?this.serviceLibs[service].css:(this.serviceBase+this.serviceLibs[service].css);if(!this.fileLoader[url]){$("head").append('<link rel="stylesheet" type="text/css"  href="'+url+'" />');this.fileLoader[url]=1;Toolkit.debug("开始加载CSS",url)}}if(this.serviceLibs[service].js){var url=(this.serviceLibs[service].js.isURL())?this.serviceLibs[service].js:(this.serviceBase+this.serviceLibs[service].js);this.getScript(url,function(){this_.fileLoader[url]=2;Toolkit.debug("完成加载JS",url);Toolkit.loader.execute(url)})}}}};Toolkit.loader.getScript=function(url,onSuccess,onError){this.getRemoteScript(url,onSuccess,onError);this.fileLoader[url]=1;Toolkit.debug("开始加载JS",url)};Toolkit.loader.getRemoteScript=function(url,onSuccess,onError){var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.type="text/javascript";script.src=url;script.onload=script.onreadystatechange=function(){if(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"){if(onSuccess){onSuccess()}script.onload=script.onreadystatechange=null;head.removeChild(script)}};script.onerror=function(){if(onError){onError()}};head.appendChild(script)};Toolkit.debugMode=false;Toolkit.debugIndex=0;Toolkit.debug=function(a,b){if(!this.debugMode){return}if(typeof(console)=="undefined"){Toolkit.load("firebug",function(){if(b==undefined){console.log(((Date.prototype.format)?(new Date()).format("hh:nn:ss.S"):(++Toolkit.debugIndex))+", "+a)}else{console.log(((Date.prototype.format)?(new Date()).format("hh:nn:ss.S"):(++Toolkit.debugIndex))+", "+a,"=",b)}})}else{if(console&&console.log){if(b==undefined){console.log(((Date.prototype.format)?(new Date()).format("hh:nn:ss.S"):(++Toolkit.debugIndex))+", "+a)}else{console.log(((Date.prototype.format)?(new Date()).format("hh:nn:ss.S"):(++Toolkit.debugIndex))+", "+a,"=",b)}}}};Toolkit.lang={};Toolkit.lang.language="zh-cn";Toolkit.lang.text={};Toolkit.lang.get=function(dataset,name){if(name){if(this.text[dataset]){return this.text[dataset][name]||""}else{return""}}else{return this.text[dataset]||null}};Toolkit.lang.set=function(dataset,name,value){if(!this.text[dataset]){this.text[dataset]={}}if(value){this.text[dataset][name]=value}else{this.text[dataset]=name}};Toolkit.lang.extend=function(dataset,data){if(!this.text[dataset]){this.text[dataset]={}}$.extend(this.text[dataset],data)}})(jQuery);
// toolkit.json.js
(function(a){if(!a||!window.Toolkit){return}Toolkit.namespace("Toolkit.json");Toolkit.json.parse=function(b){return(new Function("return "+b))()};Toolkit.json.stringify=function(c){var b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},d={array:function(n){var e=["["],g,h,j,k=n.length,m;for(j=0;j<k;j+=1){m=n[j];h=d[typeof m];if(h){m=h(m);if(typeof m=="string"){if(g){e[e.length]=","}e[e.length]=m;g=true}}}e[e.length]="]";return e.join("")},"boolean":function(e){return String(e)},"null":function(e){return"null"},number:function(e){return isFinite(e)?String(e):"null"},object:function(l){if(l){if(l instanceof Array){return d.array(l)}var e=["{"],g,h,j,k;for(j in l){k=l[j];h=d[typeof k];if(h){k=h(k);if(typeof k=="string"){if(g){e[e.length]=","}e.push(d.string(j),":",k);g=true}}}e[e.length]="}";return e.join("")}return"null"},string:function(e){if(/["\\\x00-\x1f]/.test(e)){e=e.replace(/([\x00-\x1f\\"])/g,function(f,g){var h=b[g];if(h){return h}h=g.charCodeAt();return"\\u00"+Math.floor(h/16).toString(16)+(h%16).toString(16)})}return'"'+e+'"'}};return d.object(c)}})(jQuery);
// toolkit.cookie.js
(function(a){if(!a||!window.Toolkit){return}Toolkit.namespace("Toolkit.cookie");Toolkit.cookie.get=function(d){var b=d+"=";var c=document.cookie;if(c.length>0){begin=c.indexOf(b);if(begin!=-1){begin+=b.length;end=c.indexOf(";",begin);if(end==-1){end=c.length}return unescape(c.substring(begin,end))}}return""};Toolkit.cookie.del=function(b){document.cookie=b+"=; path=/; expires=Thu,01-Jan-70 00:00:01 GMT"};Toolkit.cookie.set=function(d,e,c){var b=new Date();b.setTime(b.getTime()+(1000*60*60*24*(c||365)));document.cookie=d+"="+escape(e)+"; domain="+document.domain+"; path=/"+((b==null)?" ":("; expires="+b.toGMTString()))}})(jQuery);
// toolkit.base.js
(function(a){if(!a||!window.Toolkit){return}Toolkit.namespace("Toolkit.base");Toolkit.base.StringBuilder=function(){this._strings=[]};a.extend(Toolkit.base.StringBuilder.prototype,{append:function(d){var b=arguments.length;for(var c=0;c<b;c++){this._strings.push(arguments[c])}},appendFormat:function(d){var f=/{[0-9]+}/g;var c=d.match(f);var b=c.length;for(var e=0;e<b;e++){d=d.replace(c[e],arguments[parseInt(c[e].replace(/[{}]/g,""))+1])}this._strings.push(d)},toString:function(){return this._strings.join("")}});Toolkit.base.ImageLoader=function(c){this.options=a.extend({src:"",min:0.5,max:10,timer:0.1},c||{});this.minTimeout=this.options.min*1000;this.maxTimeout=this.options.max*1000;this.intervalTimer=this.options.timer*1000;this.theTimeout=0;this.loadStatus=0;this.loaderId=(new Date()).getTime();this.onLoad=this.options.onLoad||null;this.onError=this.options.onError||null;var b=this;this.init=function(){this.element=new Image();this.element.onload=function(){b.loadStatus=1;if(b.onLoad){b.onLoad()}Toolkit.debug("image onload",b.loaderId+": "+this.width+","+this.height)};this.element.onerror=function(){b.loadStatus=-1;if(b.onError){b.onError()}Toolkit.debug("image onerror",b.loaderId)};this.element.src=this.options.src;this.startMonitor();Toolkit.debug("image init",b.loaderId)};this.startMonitor=function(){var d=this;setTimeout(function(){d.checkMonitor()},this.minTimeout)};this.checkMonitor=function(){if(this.loadStatus!=0){return}this.theTimeout=this.minTimeout;this._monitor=setInterval(function(){b.theTimeout+=50;if(b.loadStatus!=0){clearInterval(b._monitor)}else{if(b.element.complete){clearInterval(b._monitor);b.loadStatus=1;if(b.onLoad){b.onLoad()}Toolkit.debug("image complete",b.loaderId+": "+b.element.width+","+b.element.height)}else{if(b.theTimeout>=b.maxTimeout){clearInterval(b._monitor);b.loadStatus=-1;if(b.onError){b.onError()}Toolkit.debug("image timeout",b.loaderId)}}}},b.intervalTimer)};this.init()}})(jQuery);
// toolkit.string.js
(function(a){if(!a||!window.Toolkit){return}Toolkit.namespace("Toolkit.string");Toolkit.string.isUrl=function(b){return(new RegExp(/(http[s]?|ftp):\/\/[^\/\.]+?\..+\w$/i).test(b.trim()))};Toolkit.string.isDate=function(e){var c=e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(c==null){return false}var b=new Date(c[1],c[3]-1,c[4]);return(b.getFullYear()==c[1]&&b.getMonth()+1==c[3]&&b.getDate()==c[4])};Toolkit.string.isTime=function(c){var b=c.match(/^(\d{1,2})(:)?(\d{1,2})\2(\d{1,2})$/);if(b==null){return false}if(b[1]>24||b[3]>60||b[4]>60){return false}return true};Toolkit.string.isDateTime=function(e){var c=e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/);if(c==null){return false}var b=new Date(c[1],c[3]-1,c[4],c[5],c[6],c[7]);return(b.getFullYear()==c[1]&&(b.getMonth()+1)==c[3]&&b.getDate()==c[4]&&b.getHours()==c[5]&&b.getMinutes()==c[6]&&b.getSeconds()==c[7])};Toolkit.string.isInteger=function(b){return(new RegExp(/^(-|\+)?\d+$/).test(b.trim()))};Toolkit.string.isPositiveInteger=function(b){return(new RegExp(/^\d+$/).test(b.trim()))&&parseInt(b)>0};Toolkit.string.isNegativeInteger=function(b){return(new RegExp(/^-\d+$/).test(b.trim()))};Toolkit.string.isNumber=function(b){return !isNaN(b)};Toolkit.string.isEmail=function(b){return(new RegExp(/^([_a-zA-Z\d\-\.])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/).test(b.trim()))};Toolkit.string.isMobile=function(b){return(new RegExp(/^(13|14|15|18)\d{9}$/).test(b.trim()))};Toolkit.string.isPhone=function(b){return(new RegExp(/^(([0\+]\d{2,3}-)?(0\d{2,3})-)?(\d{7,8})(-(\d{3,}))?$/).test(b.trim()))};Toolkit.string.isAreacode=function(b){return(new RegExp(/^0\d{2,3}$/).test(b.trim()))};Toolkit.string.isPostcode=function(b){return(new RegExp(/^\d{6}$/).test(b.trim()))};Toolkit.string.isLetters=function(b){return(new RegExp(/^[A-Za-z]+$/).test(b.trim()))};Toolkit.string.isDigits=function(b){return(new RegExp(/^[1-9][0-9]+$/).test(b.trim()))};Toolkit.string.isAlphanumeric=function(b){return(new RegExp(/^[a-zA-Z0-9]+$/).test(b.trim()))};Toolkit.string.isValidString=function(b){return(new RegExp(/^[a-zA-Z0-9\s.\-_]+$/).test(b.trim()))};Toolkit.string.isLowerCase=function(b){return(new RegExp(/^[a-z]+$/).test(b.trim()))};Toolkit.string.isUpperCase=function(b){return(new RegExp(/^[A-Z]+$/).test(b.trim()))};Toolkit.string.isChinese=function(b){return(new RegExp(/^[\u4e00-\u9fa5]+$/).test(b.trim()))};Toolkit.string.isIDCard=function(d){var b=new RegExp(/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/);var c=new RegExp(/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X|x)$/);return(b.test(d.trim())||c.test(d.trim()))}})(jQuery);
// toolkit.util.js
(function(a){if(!a||!window.Toolkit){return}Toolkit.namespace("Toolkit.util");Toolkit.util.flash=function(h,c,j,e,i,g,d,f,b){Toolkit.load("swfobject",function(){swfobject.embedSWF(h,c,j,e,i,g||false,d||false,f||false,b||false)})};Toolkit.util.overlayer={};Toolkit.util.overlayer.id="util-overlayer";Toolkit.util.overlayer.status=false;Toolkit.util.overlayer.showLayer=function(c,b){if(this.status){return false}c=(typeof(c)!="undefined")?c:0.3;b=b||"#000";if(a("#"+this.id).length==0){a("body").append('<div id="'+this.id+'" style="width:100%;height:100%;position:absolute;top:0; left:0;right:0;bottom:0;display:none;z-index:9990;"></div>')}a("#"+this.id).css({background:b,filter:("alpha(opacity="+c*100+")"),opacity:c});this.setSize();this.status=true};Toolkit.util.overlayer.hideLayer=function(){if(this.status){a("#"+this.id).css("display","none")}this.status=false};Toolkit.util.overlayer.setSize=function(){a("#"+this.id).css({width:"100%",height:a(document).height()+"px",display:"block"})};Toolkit.util.overlayer.resize=function(){if(this.status){a("#"+this.id).css("display","none");this.setSize()}};a(window).resize(function(){Toolkit.util.overlayer.resize()})})(jQuery);
// toolkit.stat.js
(function(a){if(!a||!window.Toolkit){return}Toolkit.namespace("Toolkit.stat");Toolkit.stat.funcStat={};Toolkit.stat.addFuncStat=function(b){if(!this.funcStat[b]||this.funcStat[b]<100000000){this.funcStat[b]=(new Date()).getTime()}else{this.funcStat[b]=(new Date()).getTime()-this.funcStat[b]}}})(jQuery);
// toolkit.init.js
(function(a){if(!a||!window.Toolkit){return}Toolkit.load.add("easysearch",{js:"toolkit/ui/easysearch.js",css:"toolkit/ui/easysearch.css"});Toolkit.load.add("util.dialog",{js:"toolkit/util/toolkit.dialog.js"});Toolkit.load.add("switcher",{js:"bootstrap/js/bootstrap-switch.min.js",css:"bootstrap/css/bootstrap-switch.min.css"});Toolkit.load.add("datetimepicker",{js:"bootdatepicker/bootstrap-datetimepicker.min.js",css:"bootdatepicker/bootstrap-datetimepicker.min.css"});Toolkit.load.add("timepicker",{js:"boottimepicker/bootstrap-timepicker.min.js",css:"boottimepicker/bootstrap-timepicker.min.css"});Toolkit.load.add("kindeditor",{js:"kindeditor/kindeditor-all.js"});Toolkit.load.add("treeview",{js:"jstree/jstree.min.js",css:"jstree/themes/default/style.min.css"});Toolkit.load.add("firebug",{js:document.location.protocol+"//getfirebug.com/firebug-lite.js"});Toolkit.load("util.dialog");a(document).ready(function(){Toolkit.page.init()})})(jQuery);
