<?xml version="1.0" encoding="UTF-8"?>
<tk:Toolkit version="5.0" xsi:schemaLocation="http://www.qdocuments.net ..\..\schema\v5\Module.xsd" xmlns:tk="http://www.qdocuments.net" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <tk:Module>
    <tk:Title>
      <tk:Content>功能菜单2</tk:Content>
    </tk:Title>
    <tk:MetaData>
      <tk:MasterDetailMetaData>
        <tk:Master>
          <tk:SingleXmlMetaData DataXml="UserManager/Function.xml" CommitDetail="true"/>
        </tk:Master>
        <tk:Detail ListStyle="Normal">
          <tk:SingleXmlMetaData DataXml="UserManager/SubFunc.xml" DisableAutoDetailLink="true"/>
        </tk:Detail>
      </tk:MasterDetailMetaData>
    </tk:MetaData>
    <tk:Source>
      <tk:CompositeSource>
        <tk:Item>
          <tk:Condition SearchType="Style" Style="Detail Insert Update Delete CDetailList"/>
          <tk:MasterDetailDbSource>
            <tk:MasterResolver>
              <tk:RegResolver>Function</tk:RegResolver>
            </tk:MasterResolver>
            <tk:Detail>
              <tk:Resolver>
                <tk:RegResolver>SubFunction</tk:RegResolver>
              </tk:Resolver>
              <tk:Relation>
                <tk:MasterFields>Id</tk:MasterFields>
                <tk:DetailFields>FnId</tk:DetailFields>
              </tk:Relation>
            </tk:Detail>
            <tk:DetailOperators>
              <tk:SubFuncTreeOperators FunctionKey="Function" LayerFieldName="TreeLayer" DisableRootDelete="false" />
              <!--<tk:SimpleTreeDetailOperators LayerFieldName="TreeLayer" IsDialog="false"/>-->
            </tk:DetailOperators>
          </tk:MasterDetailDbSource>
        </tk:Item>
        <tk:Item>
          <tk:Condition SearchType="True"/>
          <tk:SingleDbTreeSource>
            <tk:Resolver>
              <tk:RegResolver>Function</tk:RegResolver>
            </tk:Resolver>
          </tk:SingleDbTreeSource>
        </tk:Item>
      </tk:CompositeSource>
    </tk:Source>
    <tk:PageMaker>
      <tk:MasterDetailTreeRazorPageMaker ShowNewRootButton="true" IsNewRootDialog="false">
        <tk:Item Style="Update" DestUrl="List" RazorFile="UserManager/FunctionEdit.cshtml">
          <tk:Script>userjs/UserManager/function.js</tk:Script>
        </tk:Item>
        <tk:Item Style="Insert" DestUrl="List" RazorFile="UserManager/FunctionEdit.cshtml">
          <tk:Script>userjs/UserManager/function.js</tk:Script>
        </tk:Item>
      </tk:MasterDetailTreeRazorPageMaker>
    </tk:PageMaker>
    <tk:Redirector>
      <tk:OutputRedirector/>
    </tk:Redirector>
  </tk:Module>
</tk:Toolkit>
